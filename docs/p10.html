<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Portfolio 10 - Creating a Cross-Cultural Interviewee Demographics Presentation</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Portfolio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="p01.html">Portfolio 1</a>
</li>
<li>
  <a href="p02.html">Portfolio 2</a>
</li>
<li>
  <a href="p03.html">Portfolio 3</a>
</li>
<li>
  <a href="p04.html">Portfolio 4</a>
</li>
<li>
  <a href="p05.html">Portfolio 5</a>
</li>
<li>
  <a href="p06.html">Portfolio 6</a>
</li>
<li>
  <a href="p07.html">Portfolio 7</a>
</li>
<li>
  <a href="p08.html">Portfolio 8</a>
</li>
<li>
  <a href="p09.html">Portfolio 9</a>
</li>
<li>
  <a href="p10.html">Portfolio 10</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Portfolio 10 - Creating a Cross-Cultural
Interviewee Demographics Presentation</h1>

</div>


<div id="goal" class="section level2">
<h2>Goal</h2>
<blockquote>
<p>As part of my TA duties for a Cross-Cultural Psychology course, I’ve
been asked to compile all the demographic information from an assingment
in which the students interviewed someone from a different culture and
use the data to create interesting and informative visualizations for
the class.</p>
</blockquote>
<blockquote>
<p>All the data for this project was contained on printed out and
handwritten demographic forms. Part of this project was figuring out the
best way to get that physical data into a dataframe in R.</p>
</blockquote>
<blockquote>
<p>The final product of this project was the output document which was
shown to the students in class, displaying tables and visualizations for
interviewees’ age, gender, occupation, academic majors, race/ethnicity,
and birth country. Part II (Tables and Visualizations) of this document
is close to what the final product looked like (except that, in the
final product, all the code chunks were hidden; they are displayed here
to show my work). However, the Visualizing Birth Countries section was
the section that took the most work, so that section of this document
documents the process of getting to the final plot which shows a world
map with the birth countries of interviewees highlighted according to to
how many interviewees were from that country.</p>
</blockquote>
</div>
<div id="loading-tidyverse" class="section level2">
<h2>Loading tidyverse</h2>
<pre class="r"><code>library(tidyverse)</code></pre>
</div>
<div id="i.-creating-the-dataset" class="section level2">
<h2>I. Creating the Dataset</h2>
<p>All the data for the dataset is contained on printed out and
handwritten demographic forms. I consulted Claude.ai to see how best to
create the dataset. After considering the first option (Approach 1
below), I asked about more efficient ways to create the dataset,
eventually landing on Approach 4.</p>
<div id="approach-1" class="section level3">
<h3>Approach 1</h3>
<p>First, create empty dataset.</p>
<pre class="r"><code>interviewee_demographics &lt;- tibble(
  age = numeric(),
  gender = factor(levels = c(&quot;Male&quot;, &quot;Female&quot;)),
  race = character(),
  profession_or_major = character(),
  birth_country = character(),
  length_res = numeric(),
  year_moved = numeric()
)</code></pre>
<p>Then, edit dataset to add rows for each observation.</p>
<pre class="r"><code>interviewee_demographics &lt;- interviewee_demographics %&gt;%
  add_row(
    age = 33,
    gender = &quot;Female&quot;,
    race = &quot;Black or African American&quot;,
    profession_or_major = &quot;Professor&quot;,
    birth_country = &quot;Guyana&quot;,
    length_res = 2,
    year_moved = 2023
  )</code></pre>
<p>Check dataset.</p>
<pre class="r"><code>interviewee_demographics</code></pre>
<pre><code>## # A tibble: 1 × 7
##     age gender race      profession_or_major birth_country length_res year_moved
##   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;               &lt;chr&gt;              &lt;dbl&gt;      &lt;dbl&gt;
## 1    33 Female Black or… Professor           Guyana                 2       2023</code></pre>
<p>I then asked Claude if there a way more efficient method of data
entry in R, saying that, if not, it would seem best to just create the
dataset in Excel and then import it into R.</p>
<p>Claude agreed that using Excel would probably be best, but gave me
two other options for quicker data entry in R.</p>
</div>
<div id="approach-2" class="section level3">
<h3>Approach 2</h3>
<p>This one doesn’t seem to work. Thanks Claude! I didn’t spend any time
trying to figure out what Claude was shooting for and why this approach
didn’t work because I was pretty sure I would end up creating the
dataset in Excel.</p>
<pre class="r"><code># Create empty dataframe with your structure
interviewee_demographics &lt;- tibble(
  age = numeric(),
  gender = character(),
  race = character(),
  profession_or_major = character(),
  birth_country = character(),
  length_res = numeric(),
  year_moved = numeric()
)

# Then use this to open a data entry window
interviewee_demographics &lt;- edit(interviewee_demographics)</code></pre>
</div>
<div id="approach-3" class="section level3">
<h3>Approach 3</h3>
<p>This approach is much better than the two approaches above because it
allows me to type out the values of each variable row-by-row, similar to
how I would in Excel—but I still think Excel is easier.</p>
<pre class="r"><code>interviewee_demographics &lt;- tribble(
  ~age, ~gender, ~race, ~profession_or_major, ~birth_country, ~length_res, ~year_moved,
  25,   &quot;Female&quot;, &quot;Asian&quot;, &quot;Computer Science&quot;, &quot;Japan&quot;, 7, 2018,
  30,   &quot;Male&quot;,   &quot;Black&quot;, &quot;Engineering&quot;, &quot;Nigeria&quot;, 5, 2020,
  # Add more rows as needed
)
interviewee_demographics</code></pre>
<pre><code>## # A tibble: 2 × 7
##     age gender race  profession_or_major birth_country length_res year_moved
##   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;               &lt;chr&gt;              &lt;dbl&gt;      &lt;dbl&gt;
## 1    25 Female Asian Computer Science    Japan                  7       2018
## 2    30 Male   Black Engineering         Nigeria                5       2020</code></pre>
</div>
<div id="approach-4" class="section level3">
<h3>Approach 4</h3>
<p>Here is the approach I ended up using. I created the dataset in Excel
and imported it into R.</p>
<pre class="r"><code>library(readxl)
interviewee_demographics &lt;- read_excel(&quot;data/interviewee_demographics.xlsx&quot;)
interviewee_demographics</code></pre>
<pre><code>## # A tibble: 27 × 9
##      age gender  race race2 major      occupation birth_country length_res_years
##    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;                    &lt;dbl&gt;
##  1    33      2     3 &lt;NA&gt;  &lt;NA&gt;       professor  Guyana                    2   
##  2    31      2     8 mixed &lt;NA&gt;       professor  South Africa              1.67
##  3    89      2     6 &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       Italy                    NA   
##  4    25      1     4 6     &lt;NA&gt;       HES resea… Brazil                    5   
##  5    20      2     6 &lt;NA&gt;  &lt;NA&gt;       student    Netherlands               2   
##  6    28      2     3 &lt;NA&gt;  communica… student    Nigeria                   1   
##  7    57      1     6 &lt;NA&gt;  &lt;NA&gt;       retired -… England                  28   
##  8    51     NA     4 &lt;NA&gt;  economics  banking    Colombia                 27   
##  9    22      2     4 6     economics  student    Brazil                    4   
## 10    20      2     6 &lt;NA&gt;  engineeri… student    South Africa              5   
## # ℹ 17 more rows
## # ℹ 1 more variable: year_moved &lt;dbl&gt;</code></pre>
</div>
</div>
<div id="ii.-tables-and-visualizations" class="section level2">
<h2>II. Tables and Visualizations</h2>
<div id="age" class="section level3">
<h3>Age</h3>
<div id="grouped-into-age-ranges" class="section level4">
<h4>Grouped into Age Ranges</h4>
<pre class="r"><code>interviewee_demographics &lt;- interviewee_demographics %&gt;% 
  mutate(age_range = case_when(
    age %in% c(18:22) ~ &quot;18-22&quot;,
    age %in% c(23:26) ~ &quot;23-26&quot;,
    age %in% c(26:30) ~ &quot;26-30&quot;,
    age %in% c(30:40) ~ &quot;30-40&quot;,
    age %in% c(40:50) ~ &quot;40-50&quot;,
    age %in% c(50:60) ~ &quot;50-60&quot;,
    age %in% c(61:90) ~ &quot;60+&quot;
  ))
interviewee_demographics %&gt;% 
  count(age_range)</code></pre>
<pre><code>## # A tibble: 7 × 2
##   age_range     n
##   &lt;chr&gt;     &lt;int&gt;
## 1 18-22        11
## 2 23-26         5
## 3 26-30         2
## 4 30-40         2
## 5 40-50         1
## 6 50-60         2
## 7 60+           4</code></pre>
<pre class="r"><code># Define the order of age ranges
age_order &lt;- c(&quot;18-22&quot;, &quot;23-26&quot;, &quot;26-30&quot;, &quot;30-40&quot;, &quot;40-50&quot;, &quot;50-60&quot;, &quot;60+&quot;)

# Plot with ordered factors
interviewee_demographics %&gt;%
  mutate(age_range = factor(age_range, levels = age_order)) %&gt;%
  ggplot(aes(x = age_range)) +
  geom_bar() +
  theme_minimal() +
  labs(title = &quot;Age Distribution of Interviewees&quot;,
       x = &quot;Age Range&quot;,
       y = &quot;Count&quot;)</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="all-values" class="section level4">
<h4>All Values</h4>
<pre class="r"><code>interviewee_demographics %&gt;% 
  count(age)</code></pre>
<pre><code>## # A tibble: 20 × 2
##      age     n
##    &lt;dbl&gt; &lt;int&gt;
##  1    18     1
##  2    19     2
##  3    20     3
##  4    21     3
##  5    22     2
##  6    23     2
##  7    24     1
##  8    25     1
##  9    26     1
## 10    28     1
## 11    29     1
## 12    31     1
## 13    33     1
## 14    46     1
## 15    51     1
## 16    57     1
## 17    61     1
## 18    71     1
## 19    88     1
## 20    89     1</code></pre>
<pre class="r"><code>interviewee_demographics %&gt;% 
  ggplot(aes(x = age)) +
  geom_histogram(binwidth = 1) +
  labs(title = &quot;Ages of Interviewees&quot;) +
  theme_minimal()</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
</div>
<div id="gender" class="section level3">
<h3>Gender</h3>
<p>NA = missing values</p>
<pre class="r"><code>interviewee_demographics &lt;- interviewee_demographics %&gt;% 
  mutate(
    gender = factor(gender,
                    levels = c(1, 2),
                    labels = c(&quot;male&quot;, &quot;female&quot;)))
interviewee_demographics %&gt;% 
  count(gender)</code></pre>
<pre><code>## # A tibble: 3 × 2
##   gender     n
##   &lt;fct&gt;  &lt;int&gt;
## 1 male       9
## 2 female    17
## 3 &lt;NA&gt;       1</code></pre>
<pre class="r"><code>interviewee_demographics %&gt;% 
  ggplot(aes(x = gender)) +
  geom_bar() +
  theme_minimal()</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
<div id="occupation" class="section level3">
<h3>Occupation</h3>
<pre class="r"><code>interviewee_demographics %&gt;% 
  count(occupation) %&gt;% 
  arrange(desc(n))</code></pre>
<pre><code>## # A tibble: 13 × 2
##    occupation               n
##    &lt;chr&gt;                &lt;int&gt;
##  1 student                 14
##  2 professor                2
##  3 HES researcher           1
##  4 accountant               1
##  5 banking                  1
##  6 business                 1
##  7 clinical coordinator     1
##  8 electrical engineer      1
##  9 graduate student         1
## 10 housekeeping             1
## 11 retired - finance        1
## 12 shipping analyst         1
## 13 &lt;NA&gt;                     1</code></pre>
<pre class="r"><code>interviewee_demographics &lt;- interviewee_demographics %&gt;% 
  mutate(occupations = if_else(occupation == &quot;student&quot;, &quot;student&quot;, &quot;other&quot;))

interviewee_demographics %&gt;% 
  ggplot(aes(x = occupations)) +
  geom_bar() +
  theme_minimal()</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="students-majors" class="section level3">
<h3>Students’ Majors</h3>
<pre class="r"><code>interviewee_demographics %&gt;% 
  filter(occupation == &quot;student&quot;) %&gt;% 
  count(major)</code></pre>
<pre><code>## # A tibble: 10 × 2
##    major                  n
##    &lt;chr&gt;              &lt;int&gt;
##  1 HES                    1
##  2 biology                1
##  3 business marketing     1
##  4 communications         1
##  5 computer science       1
##  6 economics              1
##  7 engineering            2
##  8 english                1
##  9 history                1
## 10 &lt;NA&gt;                   4</code></pre>
</div>
<div id="race-ethnicity" class="section level3">
<h3>Race / Ethnicity</h3>
<p>Other races included mixed, Turkish, and Middle Eastern. Two
interviewees selected both Hispanic and White. One interviewee selected
both Asian and Black or African American.</p>
<pre class="r"><code>interviewee_demographics &lt;- interviewee_demographics %&gt;% 
  mutate(
    race = factor(race,
                  levels = c(1:8),
                  labels = c(&quot;American Indian or Alaskan Native&quot;,
                            &quot;Asian&quot;,
                            &quot;Black or African American&quot;,
                            &quot;Hispanic or Latino&quot;,
                            &quot;Native Hawaiian or Other Pacific Islander&quot;,
                            &quot;White&quot;,
                            &quot;Prefer not to say&quot;,
                            &quot;Other&quot;))
  )
interviewee_demographics %&gt;% 
  count(race) %&gt;% 
  arrange(desc(n))</code></pre>
<pre><code>## # A tibble: 5 × 2
##   race                          n
##   &lt;fct&gt;                     &lt;int&gt;
## 1 Hispanic or Latino           10
## 2 White                         9
## 3 Black or African American     3
## 4 Other                         3
## 5 Asian                         2</code></pre>
</div>
<div id="visualizing-birth-countries" class="section level3">
<h3>Visualizing Birth Countries</h3>
<p>The most interesting visualization will probably be to depict where
on the world map the interviewees were born. I found and copied and
pasted the code below from a Stack Overflow forum post titled “How to
plot a world map using R” (link: <a
href="https://stackoverflow.com/questions/69625716/how-to-plot-a-world-map-using-r"
class="uri">https://stackoverflow.com/questions/69625716/how-to-plot-a-world-map-using-r</a>).</p>
<pre class="r"><code>library(&quot;ggplot2&quot;)
theme_set(theme_bw())
library(&quot;sf&quot;)</code></pre>
<pre><code>## Linking to GEOS 3.13.0, GDAL 3.8.5, PROJ 9.5.1; sf_use_s2() is TRUE</code></pre>
<pre class="r"><code>library(&quot;rnaturalearth&quot;)
library(&quot;rnaturalearthdata&quot;)</code></pre>
<pre><code>## 
## Attaching package: &#39;rnaturalearthdata&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:rnaturalearth&#39;:
## 
##     countries110</code></pre>
<pre class="r"><code>world &lt;- ne_countries(scale = &quot;medium&quot;, returnclass = &quot;sf&quot;)</code></pre>
<pre class="r"><code>ggplot(data = world) +
    geom_sf()</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = world) +
    geom_sf() +
    xlab(&quot;Longitude&quot;) + ylab(&quot;Latitude&quot;) +
    ggtitle(&quot;World map&quot;, subtitle = paste0(&quot;(&quot;, length(unique(world$NAME)), &quot; countries)&quot;))</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-16-1.png" width="672" />
This demonstrates an example of how one might apply a fill based on one
of the variables in the world dataset.</p>
<pre class="r"><code>ggplot(data = world) +
    geom_sf(aes(fill = pop_est)) +
    scale_fill_viridis_c(option = &quot;plasma&quot;, trans = &quot;sqrt&quot;)</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-17-1.png" width="672" />
This demonstrates an example of how one might apply a fill based on
criteria external to the world dataset.</p>
<pre class="r"><code>world &lt;- ne_countries(scale = &quot;medium&quot;, returnclass = &quot;sf&quot;)

my_countries &lt;- c(&quot;Aruba&quot;,&quot;Afghanistan&quot;, &quot;Morocco&quot;, &quot;Canada&quot;)

world_modified &lt;- world %&gt;% 
  mutate(my_selection = ifelse(admin %in% my_countries,
                               1, NA))


ggplot(data = world_modified) +
  geom_sf(aes(fill=my_selection)) +
  theme_bw()</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-18-1.png" width="672" />
Claude helped me to adapt the code above for my goal of highlighting the
countries contained in the birth countries of my dataset.</p>
<pre class="r"><code>birth_countries &lt;- unique(interviewee_demographics$birth_country)

world_modified &lt;- world %&gt;% 
  mutate(highlight = ifelse(admin %in% birth_countries, 1, NA))

ggplot(data = world_modified) +
  geom_sf(aes(fill = highlight)) +
  scale_fill_viridis_c(name = &quot;Interviewees&#39; Birth Countries&quot;, 
                       na.value = &quot;gray90&quot;) +
  theme_bw() +
  labs(title = &quot;Birth Countries of Interviewees&quot;)</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-19-1.png" width="672" />
I prefer this option because it shows counts. Claude provided this
option as well.</p>
<pre class="r"><code># Count interviewees by country
country_counts &lt;- interviewee_demographics %&gt;%
  count(birth_country)

# Join with world data
world_with_counts &lt;- world %&gt;%
  left_join(country_counts, by = c(&quot;admin&quot; = &quot;birth_country&quot;))

# Create map with count shading
ggplot(data = world_with_counts) +
  geom_sf(aes(fill = n)) +
  scale_fill_viridis_c(name = &quot;Number of Interviewees&quot;, 
                       na.value = &quot;gray90&quot;) +
  theme_bw() +
  labs(title = &quot;Interviewees by Birth Country&quot;)</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-20-1.png" width="1152" />
I asked Claude to do the fill a different way so that the legend was not
a gradient and would correspond only to the actual count values in the
dataset (1, 2, and 3). We achieved this by putting fill = factor(n) in
the aesthetics for geom_sf.</p>
<pre class="r"><code>library(viridis)</code></pre>
<pre><code>## Loading required package: viridisLite</code></pre>
<pre class="r"><code># Create map with manual discrete color scale
ggplot(data = world_with_counts) +
  geom_sf(aes(fill = factor(n))) +  # Convert to factor here
  scale_fill_manual(name = &quot;Number of Interviewees&quot;,
                   values = viridis(3),  # Get 3 colors from viridis
                   na.value = &quot;gray90&quot;) +
  theme_bw() +
  labs(title = &quot;Interviewees by Birth Country&quot;)</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-21-1.png" width="1152" /></p>
<p>Comparing the plot above to the original data.</p>
<pre class="r"><code>interviewee_demographics %&gt;% 
  count(birth_country) %&gt;% 
  arrange(desc(n))</code></pre>
<pre><code>## # A tibble: 19 × 2
##    birth_country     n
##    &lt;chr&gt;         &lt;int&gt;
##  1 Brazil            3
##  2 Colombia          3
##  3 Italy             2
##  4 Japan             2
##  5 Mexico            2
##  6 South Africa      2
##  7 Egypt             1
##  8 England           1
##  9 Eritrea           1
## 10 Germany           1
## 11 Greece            1
## 12 Guyana            1
## 13 Honduras          1
## 14 Iceland           1
## 15 India             1
## 16 Netherlands       1
## 17 Nigeria           1
## 18 Peru              1
## 19 Turkey            1</code></pre>
<p>Upon inspection, I notice that the country_counts dataframe (made
from the interviewee_demographics data) was used to create the
world_with_counts dataframe by matching the “admin” and “birth_country”
columns. At least one of the names (England) doesn’t appear in the admin
column of the world dataset. Checking to see where else this may have
happened.</p>
<pre class="r"><code>checking &lt;- world_with_counts %&gt;% 
  select(admin, n) %&gt;% 
  arrange(desc(n))

print(checking, n = 19)</code></pre>
<pre><code>## Simple feature collection with 242 features and 2 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -180 ymin: -89.99893 xmax: 180 ymax: 83.59961
## Geodetic CRS:  WGS 84
## First 19 features:
##           admin  n                       geometry
## 1      Colombia  3 MULTIPOLYGON (((-71.31973 1...
## 2        Brazil  3 MULTIPOLYGON (((-66.87603 1...
## 3  South Africa  2 MULTIPOLYGON (((29.36484 -2...
## 4        Mexico  2 MULTIPOLYGON (((-117.1283 3...
## 5         Japan  2 MULTIPOLYGON (((133.3705 36...
## 6         Italy  2 MULTIPOLYGON (((7.021094 45...
## 7        Turkey  1 MULTIPOLYGON (((25.97002 40...
## 8          Peru  1 MULTIPOLYGON (((-69.96592 -...
## 9       Nigeria  1 MULTIPOLYGON (((7.300781 4....
## 10  Netherlands  1 MULTIPOLYGON (((5.993945 50...
## 11        India  1 MULTIPOLYGON (((68.16504 23...
## 12      Iceland  1 MULTIPOLYGON (((-15.54312 6...
## 13     Honduras  1 MULTIPOLYGON (((-83.15752 1...
## 14       Guyana  1 MULTIPOLYGON (((-60.74214 5...
## 15       Greece  1 MULTIPOLYGON (((27.86016 36...
## 16      Germany  1 MULTIPOLYGON (((9.524023 47...
## 17      Eritrea  1 MULTIPOLYGON (((36.52432 14...
## 18        Egypt  1 MULTIPOLYGON (((36.87139 21...
## 19     Zimbabwe NA MULTIPOLYGON (((31.28789 -2...</code></pre>
<p>Comparing this output to the output above, I’ve confirmed that
England is the only one missing. In the admin column of the world
dataset, there is no England, only United Kingdom. So, I’ll change this
value of the interviewee_demographics dataset.</p>
<pre class="r"><code>interviewee_demographics &lt;- interviewee_demographics %&gt;% 
  mutate(birth_country = if_else(birth_country == &quot;England&quot;, 
                                &quot;United Kingdom&quot;, 
                                birth_country))</code></pre>
<p>Now, I’ll recreate the world_with_counts dataframe with the updated
country name by joining joining the world and country_counts dataframes,
then replot.</p>
<pre class="r"><code>country_counts &lt;- interviewee_demographics %&gt;%
  count(birth_country)

world_with_counts &lt;- world %&gt;%
  left_join(country_counts, by = c(&quot;admin&quot; = &quot;birth_country&quot;))

ggplot(data = world_with_counts) +
  geom_sf(aes(fill = factor(n))) +  # Convert to factor here
  scale_fill_manual(name = &quot;Number of Interviewees&quot;,
                   values = viridis(3),  # Get 3 colors from viridis
                   na.value = &quot;gray90&quot;) +
  theme_bw() +
  labs(title = &quot;Interviewees by Birth Country&quot;)</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-25-1.png" width="1152" />
Now, finally, here’s the code from the document that I submitted to the
professor to show to the class that smooshes all the above steps into
one and displays the world map plot together with country counts to make
clear which countries are highlighted.</p>
<pre class="r"><code>world &lt;- ne_countries(scale = &quot;medium&quot;, returnclass = &quot;sf&quot;)

interviewee_demographics &lt;- interviewee_demographics %&gt;% 
  mutate(birth_country = if_else(birth_country == &quot;England&quot;, 
                                &quot;United Kingdom&quot;, 
                                birth_country))

country_counts &lt;- interviewee_demographics %&gt;%
  count(birth_country)

world_with_counts &lt;- world %&gt;%
  left_join(country_counts, by = c(&quot;admin&quot; = &quot;birth_country&quot;))

interviewee_demographics %&gt;% 
  count(birth_country) %&gt;% 
  arrange(desc(n))</code></pre>
<pre><code>## # A tibble: 19 × 2
##    birth_country      n
##    &lt;chr&gt;          &lt;int&gt;
##  1 Brazil             3
##  2 Colombia           3
##  3 Italy              2
##  4 Japan              2
##  5 Mexico             2
##  6 South Africa       2
##  7 Egypt              1
##  8 Eritrea            1
##  9 Germany            1
## 10 Greece             1
## 11 Guyana             1
## 12 Honduras           1
## 13 Iceland            1
## 14 India              1
## 15 Netherlands        1
## 16 Nigeria            1
## 17 Peru               1
## 18 Turkey             1
## 19 United Kingdom     1</code></pre>
<pre class="r"><code>ggplot(data = world_with_counts) +
  geom_sf(aes(fill = factor(n))) +  # Convert to factor here
  scale_fill_manual(name = &quot;Number of Interviewees&quot;,
                   values = viridis(3),  # Get 3 colors from viridis
                   na.value = &quot;gray90&quot;) +
  theme_bw() +
  labs(title = &quot;Interviewees&#39; Birth Countries&quot;)</code></pre>
<p><img src="p10_files/figure-html/unnamed-chunk-26-1.png" width="1152" />
[Note: I don’t know why there is so much empty white space at the bottom
of this docuement.]</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
